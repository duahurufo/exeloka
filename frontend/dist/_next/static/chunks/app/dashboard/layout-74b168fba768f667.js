(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[954],{38091:(e,t,s)=>{Promise.resolve().then(s.bind(s,66395))},66395:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>A});var a=s(95155),n=s(76924),o=s(20063),r=s(12115),l=s(52619),c=s.n(l),i=s(13533),d=s(10610),m=s(77415),u=s(30955),h=s(49128),g=s(21219),x=s(36778),f=s(51915);let p=[{name:"Dashboard",href:"/dashboard",icon:i.A},{name:"Projects",href:"/dashboard/projects",icon:d.A},{name:"Knowledge Base",href:"/dashboard/knowledge",icon:m.A},{name:"Recommendations",href:"/dashboard/recommendations",icon:u.A},{name:"Documents",href:"/dashboard/documents",icon:h.A},{name:"Analytics",href:"/dashboard/analytics",icon:g.A},{name:"Learning Insights",href:"/dashboard/learning",icon:x.A},{name:"Settings",href:"/dashboard/settings",icon:f.A}];function y(){let e=(0,o.usePathname)();return(0,a.jsxs)("div",{className:"w-64 bg-white border-r border-gray-200 flex flex-col",children:[(0,a.jsx)("div",{className:"flex-shrink-0 px-4 py-6 border-b border-gray-200",children:(0,a.jsxs)(c(),{href:"/dashboard",className:"flex items-center",children:[(0,a.jsx)("div",{className:"h-8 w-8 bg-blue-600 rounded-lg flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white font-bold text-lg",children:"E"})}),(0,a.jsx)("span",{className:"ml-3 text-xl font-bold text-gray-900",children:"Exeloka"})]})}),(0,a.jsx)("nav",{className:"flex-1 px-4 py-6 space-y-1",children:p.map(t=>{let s=e===t.href||"/dashboard"!==t.href&&e.startsWith(t.href);return(0,a.jsxs)(c(),{href:t.href,className:"sidebar-link ".concat(s?"active":""),children:[(0,a.jsx)(t.icon,{className:"mr-3 h-5 w-5 flex-shrink-0"}),t.name]},t.name)})}),(0,a.jsx)("div",{className:"flex-shrink-0 px-4 py-4 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"text-xs text-gray-500 text-center",children:[(0,a.jsx)("p",{children:"Cultural Wisdom System"}),(0,a.jsx)("p",{children:"Sampang, East Java"})]})})]})}var k=s(90990),b=s(68399),j=s(78207),w=s(15279);function v(){let{user:e,logout:t}=(0,n.A)(),s=(0,o.useRouter)(),l=()=>{t(),s.push("/")};return(0,a.jsx)("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsxs)("button",{type:"button",className:"lg:hidden -ml-0.5 -mt-0.5 h-12 w-12 inline-flex items-center justify-center rounded-md text-gray-500 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500",children:[(0,a.jsx)("span",{className:"sr-only",children:"Open sidebar"}),(0,a.jsx)(j.A,{className:"h-6 w-6"})]})}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("button",{type:"button",className:"bg-white p-1 rounded-full text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,a.jsx)("span",{className:"sr-only",children:"View notifications"}),(0,a.jsx)(w.A,{className:"h-6 w-6"})]}),(0,a.jsxs)(k.W,{as:"div",className:"relative ml-3",children:[(0,a.jsx)("div",{children:(0,a.jsxs)(k.W.Button,{className:"max-w-xs bg-white flex items-center text-sm rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,a.jsx)("span",{className:"sr-only",children:"Open user menu"}),(0,a.jsx)("div",{className:"h-8 w-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-blue-600 font-medium text-sm",children:null==e?void 0:e.full_name.charAt(0).toUpperCase()})}),(0,a.jsxs)("div",{className:"ml-3 text-left",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:null==e?void 0:e.full_name}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:null==e?void 0:e.company_name})]})]})}),(0,a.jsx)(b.e,{as:r.Fragment,enter:"transition ease-out duration-200",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,a.jsx)(k.W.Items,{className:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none",children:(0,a.jsxs)("div",{className:"py-1",children:[(0,a.jsx)(k.W.Item,{children:e=>{let{active:t}=e;return(0,a.jsx)("button",{onClick:()=>s.push("/dashboard/profile"),className:"".concat(t?"bg-gray-100":""," block w-full text-left px-4 py-2 text-sm text-gray-700"),children:"Your Profile"})}}),(0,a.jsx)(k.W.Item,{children:e=>{let{active:t}=e;return(0,a.jsx)("button",{onClick:()=>s.push("/dashboard/settings"),className:"".concat(t?"bg-gray-100":""," block w-full text-left px-4 py-2 text-sm text-gray-700"),children:"Settings"})}}),(0,a.jsx)(k.W.Item,{children:e=>{let{active:t}=e;return(0,a.jsx)("button",{onClick:l,className:"".concat(t?"bg-gray-100":""," block w-full text-left px-4 py-2 text-sm text-gray-700"),children:"Sign out"})}})]})})})]})]})]})})}function N(){let{user:e}=(0,n.A)(),t=new Date().getFullYear();return(0,a.jsx)("footer",{className:"bg-white border-t border-gray-200 px-6 py-4",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center text-sm text-gray-500 space-y-2 md:space-y-0",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("span",{children:["\xa9 ",t," Exeloka - Cultural Wisdom Recommendations"]}),e&&(0,a.jsxs)("span",{className:"hidden md:inline",children:["Logged in as: ",e.full_name]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("span",{className:"hidden sm:inline",children:"System Status:"}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,a.jsx)("span",{className:"text-xs",children:"Online"})]})]})]})})}function A(e){let{children:t}=e,{user:s,loading:l}=(0,n.A)(),c=(0,o.useRouter)();return((0,r.useEffect)(()=>{l||s||c.push("/login")},[s,l,c]),l)?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s?(0,a.jsxs)("div",{className:"bg-gray-50 flex flex-1",children:[(0,a.jsx)(y,{}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,a.jsx)(v,{}),(0,a.jsx)("main",{className:"flex-1 p-6",children:t}),(0,a.jsx)(N,{})]})]}):null}},76924:(e,t,s)=>{"use strict";s.d(t,{A:()=>c,O:()=>i});var a=s(95155),n=s(12115),o=s(90960),r=s(22663);let l=(0,n.createContext)(void 0);function c(){let e=(0,n.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function i(e){let{children:t}=e,[s,c]=(0,n.useState)(null),[i,d]=(0,n.useState)(!0),[m,u]=(0,n.useState)(null);(0,n.useEffect)(()=>{let e=localStorage.getItem("exeloka_token"),t=localStorage.getItem("exeloka_user");if(e){if(u(e),o.FH.setAuthToken(e),"fake-jwt-token-for-testing"===e&&t)try{let e=JSON.parse(t);c(e),d(!1);return}catch(e){}o.FH.get("/auth/me").then(e=>{e.data.success?c(e.data.data.user):(localStorage.removeItem("exeloka_token"),localStorage.removeItem("exeloka_refresh_token"),localStorage.removeItem("exeloka_user"),u(null),o.FH.setAuthToken(null))}).catch(()=>{localStorage.removeItem("exeloka_token"),localStorage.removeItem("exeloka_refresh_token"),localStorage.removeItem("exeloka_user"),u(null),o.FH.setAuthToken(null)}).finally(()=>{d(!1)})}else d(!1)},[]);let h=async(e,t)=>{try{let s=await o.FH.post("/auth/login",{email:e,password:t});if(s.data.success){let{user:e,token:t,refreshToken:a}=s.data.data;c(e),u(t),o.FH.setAuthToken(t),localStorage.setItem("exeloka_token",t),localStorage.setItem("exeloka_refresh_token",a),r.Ay.success("Welcome back!")}else r.Ay.error(s.data.message||"Login failed")}catch(t){var s,a;let e=(null==(a=t.response)||null==(s=a.data)?void 0:s.message)||"Login failed";throw r.Ay.error(e),t}},g=async e=>{try{let t=await o.FH.post("/auth/register",e);if(t.data.success){let{user:e,token:s,refreshToken:a}=t.data.data;c(e),u(s),o.FH.setAuthToken(s),localStorage.setItem("exeloka_token",s),localStorage.setItem("exeloka_refresh_token",a),r.Ay.success("Account created successfully!")}else r.Ay.error(t.data.message||"Registration failed")}catch(a){var t,s;let e=(null==(s=a.response)||null==(t=s.data)?void 0:t.message)||"Registration failed";throw r.Ay.error(e),a}};return(0,a.jsx)(l.Provider,{value:{user:s,loading:i,login:h,register:g,logout:()=>{c(null),u(null),o.FH.setAuthToken(null),localStorage.removeItem("exeloka_token"),localStorage.removeItem("exeloka_refresh_token"),localStorage.removeItem("exeloka_user"),r.Ay.success("Logged out successfully")},token:m},children:t})}},90960:(e,t,s)=>{"use strict";s.d(t,{FH:()=>r,_x:()=>c,ao:()=>d,jd:()=>m,tK:()=>l,yj:()=>i});var a=s(95125),n=s(22663);class o{setupInterceptors(){this.client.interceptors.request.use(e=>(this.authToken&&(e.headers.Authorization="Bearer ".concat(this.authToken)),e),e=>Promise.reject(e)),this.client.interceptors.response.use(e=>e,async e=>{var t,s,a;let o=e.config;if((null==(t=e.response)?void 0:t.status)===401&&!o._retry){o._retry=!0;let e=localStorage.getItem("exeloka_refresh_token");if(e)try{let t=await this.client.post("/auth/refresh",{refreshToken:e});if(t.data.success){let{token:e,refreshToken:s}=t.data.data;return localStorage.setItem("exeloka_token",e),localStorage.setItem("exeloka_refresh_token",s),this.setAuthToken(e),o.headers.Authorization="Bearer ".concat(e),this.client(o)}}catch(e){this.handleAuthFailure()}else this.handleAuthFailure()}return(null==(a=e.response)||null==(s=a.data)?void 0:s.message)?401!==e.response.status&&n.Ay.error(e.response.data.message):"Network Error"===e.message?n.Ay.error("Network error. Please check your connection."):"ECONNABORTED"===e.code&&n.Ay.error("Request timeout. Please try again."),Promise.reject(e)})}handleAuthFailure(){localStorage.removeItem("exeloka_token"),localStorage.removeItem("exeloka_refresh_token"),this.setAuthToken(null),window.location.pathname.includes("/login")||window.location.pathname.includes("/register")||(window.location.href="/login")}setAuthToken(e){this.authToken=e}async get(e,t){return this.client.get(e,{params:t})}async post(e,t,s){return this.client.post(e,t,s)}async put(e,t){return this.client.put(e,t)}async delete(e){return this.client.delete(e)}async uploadFile(e,t,s){return this.client.post(e,t,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e=>{s&&e.total&&s(Math.round(100*e.loaded/e.total))}})}async downloadFile(e,t){try{let s=await this.client.get(e,{responseType:"blob"}),a=new Blob([s.data]),o=window.URL.createObjectURL(a),r=document.createElement("a");r.href=o,r.download=t||"download",document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(o),n.Ay.success("File downloaded successfully")}catch(e){throw n.Ay.error("Failed to download file"),e}}constructor(){this.authToken=null,this.client=a.A.create({baseURL:"https://www.forrestofus.com/api",timeout:3e4,headers:{"Content-Type":"application/json"}}),this.setupInterceptors()}}let r=new o,l={ingestData:e=>r.post("/knowledge/ingest",e),addDirectEntry:e=>e instanceof FormData?r.uploadFile("/knowledge/direct",e):r.post("/knowledge/direct",e),search:(e,t)=>r.get("/knowledge/search",{query:e,...t}),getSources:e=>r.get("/knowledge/sources",e),getCategories:()=>r.get("/knowledge/categories"),getSource:e=>r.get("/knowledge/".concat(e)),deleteSource:e=>r.delete("/knowledge/sources/".concat(e))},c={create:e=>r.post("/recommendations/projects",e),getAll:e=>r.get("/recommendations/projects",e),getById:e=>r.get("/recommendations/projects/".concat(e)),update:(e,t)=>r.put("/recommendations/projects/".concat(e),t),delete:e=>r.delete("/recommendations/projects/".concat(e)),getPromptTemplates:()=>r.get("/recommendations/prompt-templates"),generateRecommendation:e=>r.post("/recommendations/generate",e),getRecommendations:e=>r.get("/recommendations",e),getRecommendation:e=>r.get("/recommendations/".concat(e)),submitFeedback:(e,t)=>r.post("/recommendations/".concat(e,"/feedback"),t),getAnalytics:()=>r.get("/recommendations/analytics"),getAnalyticsDashboard:e=>r.get("/recommendations/analytics/dashboard?range=".concat(e))},i={getAll:e=>r.get("/recommendations",e),getById:e=>r.get("/recommendations/".concat(e)),getByProject:e=>r.get("/recommendations?project=".concat(e)),submitFeedback:(e,t)=>r.post("/recommendations/".concat(e,"/feedback"),t),generateDocument:(e,t)=>r.post("/recommendations/".concat(e,"/generate-document"),{format:t},{responseType:"blob"}),delete:e=>r.delete("/recommendations/".concat(e))},d={generateDocx:e=>r.post("/documents/generate/docx",e),generateXlsx:e=>r.post("/documents/generate/xlsx",e),generatePptx:e=>r.post("/documents/generate/pptx",e),getDocuments:e=>r.get("/documents",e),downloadDocument:e=>r.downloadFile("/documents/download/".concat(e),e),getStats:()=>r.get("/documents/stats")},m={getInsights:e=>r.get("/recommendations/learning/insights",e),getStats:()=>r.get("/recommendations/learning/stats"),getFeedbackSummary:e=>r.get("/recommendations/".concat(e,"/feedback-summary"))}}},e=>{e.O(0,[459,619,861,51,441,493,358],()=>e(e.s=38091)),_N_E=e.O()}]);